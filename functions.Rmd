---
title: "関数"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

今までは、Rで簡単な計算をして、その結果を変数として保存してきました。つまり、Rを計算機としての使い方を学びました。しかし、みんなさんはそれよりももっと複雑な作業をしたいと思われます。もっと複雑な作業をするには、「関数」を使います。

関数とは、ある値をインプットとし、そのインプットを元に何らかの処理をして、アウトプットを返す、ものです。

書き方は`関数名(引数)`です（関数名の後にインプットを格好で挟んで書く）。引用符の中で書くインプットを「引数」と呼びます。

では、関数を使ってみましょう。

初めて使う関数は`print()`です。`print()`は渡された引数をそのままプリントアウトする関数です。

```{r print}
print("Hello world")
```

"Hello world"はプログラミング言語でもっとも基本的な例に使うことが多いです。ごく簡単ですが、これでやりたいことが問題なくできたことを確かめます。

今は関数のインプットを直接入れましたが、変数を引数として使うこともできます。

```{r print-2}
my_name <- "Joel"

print(my_name)

my_name <- "Riku"

print(my_name)
```

Rにはたくさんの関数があります。例えば、様々な統計、図の出力、データの整理など、データ解析に使う関数はもともとRについていますが、Rユーザーがその上に開発した関数も切りがないくらいたくさんあります。ツイートを読み込む関数、発表を作る関数（今のスライドもそうです）、サイトを作る関数など、色々あります。これらの関数のまとまったものを「パッケージ」と呼びます。RにはたくさんのパッケージがあることがRの大きな強みの一つです。

関数に二つ以上の引数がある場合は、引数をコンマで区切ります。例えば、`paste()`は渡された引数をくっつける関数です。

```{r paste}
paste("My name is", my_name)
```

引数が二つ以上ある場合、どのインプットをどの引数に使うのか、指定する必要があります。これは引数の名前で出来ます。例えば、`round()`関数を見てみましょう。`round()`は数字を丸める関数です。引数は二つあります：対処の数（`x`）と丸めた後に残す少数の数（`digits`）です。

```{r round}
round(x = 3.14, digits = 0)

round(x = 3.14, digits = 1)
```

実は、どの関数でも引数の順番が決まっていますので、関数名を使わなくても同じことが出来ます：

```{r round-2}
round(3.14, 0)
```

ただし、この場合は自分でその順番を覚える必要があります。もし順番を間違えても、Rは指示されたまま処理を行います：

```{r round-3}
round(0, 3.14)
```

もう一つの例を見てみましょう。`paste()`には、`sep`という名前の引数があります。`sep`は入力された文字列をくっつける際の区切りを指定します。例えば、日付をダッシュで区切りたい場合は、こう出来す：

```{r paste-2}
paste("2021", "04", "07", sep = "-")
```

これでお気づきになったと思いますが、Rにはたくさんの関数があるのだけではなく、その関数の引数もたくさんあります。Rを使うのにはは**これらの関数を覚える必要はありません**。もしある関数の使い方を知りたければ、まずはR備え付けのヘルプ機能を使いましょう。

関数のヘルプファイルを見るには`?関数名`、あるいは`help(関数名)`を使います：

```{r help}
help(paste)
```

そうしますと、右の方のパネルにこのヘルプファイルが表示されます。上の方に関数の概要があって、次に引数のリストがあって、下の方に使い方の説明と使い方の例があります。ただし、これらのヘルプファイルは結構専門用語が多くて、あまり初心者にはやさしくないです。一番すぐに使えるのは引数名でしょう。そして、そもそも使いたい関数名も知らないと行けないですね。実は、多くの場合はヘルプファイルを読むよりも、普通にググった方が使える情報が見つかるケースが多いです。
